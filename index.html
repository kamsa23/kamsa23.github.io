<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Find Your Location</title>
</head>
<body>
    <h1>Your Location Details:</h1>

    <h2>üìç GPS-Based Location (Accurate)</h2>
    <p><strong>Coordinates:</strong> <span id="gps-coordinates">Detecting...</span></p>
    <p><strong>Address:</strong> <span id="gps-address">Detecting...</span></p>
    <p><strong>Country:</strong> <span id="gps-country">Detecting...</span></p>

    <h2>üåê IP-Based Location (Extra Info)</h2>
    <p><strong>IP Address:</strong> <span id="ip">Detecting...</span></p>
    <p><strong>Estimated Location:</strong> <span id="ip-location">Detecting...</span></p>
    <p><strong>ISP:</strong> <span id="isp">Detecting...</span></p>
    <p><strong>Timezone:</strong> <span id="timezone">Detecting...</span></p>

    <script>
        function getGPSLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(showGPSPosition, showError);
            } else {
                document.getElementById("gps-coordinates").innerHTML = "Geolocation is not supported by your browser.";
            }
        }

        function showGPSPosition(position) {
            let lat = position.coords.latitude;
            let lon = position.coords.longitude;
            document.getElementById("gps-coordinates").innerHTML = `${lat}, ${lon}`;

            // Get address using OpenStreetMap Nominatim API (Free & No API Key Needed)
            fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lon}`)
                .then(response => response.json())
                .then(data => {
                    document.getElementById("gps-address").innerHTML = data.display_name || "Not available";
                    document.getElementById("gps-country").innerHTML = data.address.country || "Not available";
                })
                .catch(error => {
                    document.getElementById("gps-address").innerHTML = "Error fetching GPS location details.";
                });
        }

        function getIPLocation() {
            fetch("https://api.ipify.org?format=json")
                .then(response => response.json())
                .then(data => {
                    document.getElementById("ip").innerHTML = data.ip;
                    fetch(`https://api.ipgeolocation.io/ipgeo?apiKey=95599cccebed43758369a16fe62da057&ip=${data.ip}`)
                        .then(response => response.json())
                        .then(data => {
                            document.getElementById("ip-location").innerHTML = `${data.city}, ${data.country_name}`;
                            document.getElementById("isp").innerHTML = data.isp || "Not available";
                            document.getElementById("timezone").innerHTML = data.time_zone.name || "Not available";
                        })
                        .catch(error => {
                            document.getElementById("ip-location").innerHTML = "Error fetching IP location details.";
                        });
                })
                .catch(error => {
                    document.getElementById("ip").innerHTML = "Error fetching IP.";
                });
        }

        function showError(error) {
            document.getElementById("gps-coordinates").innerHTML = "Unable to retrieve GPS location.";
        }

        getGPSLocation();
        getIPLocation();
    </script>
</body>
</html>
